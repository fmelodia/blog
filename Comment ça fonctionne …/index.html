<!DOCTYPE html>
<html>
  <head>
    <title>Comment ça fonctionne …</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="created" content="2018-05-26 14:29:01 +0200"/>
    <meta name="modified" content="2018-06-02 12:01:32 +0200"/>
    <meta name="tags" content="technique"/>
    <link rel="stylesheet" href="/default.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  </head>
  <header></header>
  <body>
    <main class="note-wrapper">
      <nav>
        <a href="/" class="fas fa-home fa-2x" style="color:#de4c4f"></a>
        
          <a class="far fa-folder" href="/tag/technique/">
            technique</a>
        
      </nav>
      <article>
        <h1>Comment ça fonctionne …</h1>
<p>Dans un premier temps, on utilise un logiciel IOS et Mac : <a href="http://www.bear-writer.com">Bear</a>. C’est un logiciel de prise de note, en markdown, assez sympa.</p>
<p>Quand le document est prêt, on l’exporte dans le format de l’application (originalement, <i>.bearnote</i>)  dans un répertoire sur l’ordinateur. Ça peut être un répertoire partagé, type Dropbox ou iCloud.</p>
<br>
<p>Entre en jeu un petit programme : <a href="https://github.com/wuusn/miyano">miyano</a> qui se charge de convertir automatiquement le document <i>.bearnote</i> en un site statique et à l’exporter sur GitHub.</p>
<hr>
<p>GitHub ne semble pas imposer de quotas, on doit pouvoir y envoyer suffisamment pour tenir un blog avec quelques photos.</p>
<p>Et de toute façon, les données sont sauvegardées un peu partout :</p>
<ul><li>le logiciel Bear</li></ul>
<ul><li>sur l’ordinateur et sur iCloud</li></ul>
<ul><li>sur GitHub</li></ul>
<hr>
<p>Originellement, le répertoire dans lequel Bear cherche les fichiers <i>.bearnote</i> est situé dans mon dossier iCloud.</p>
<p>Problème : iCloud ne permet pas de partager un dossier entre plusieurs utilisateurs. Pour régler le problème, j’ai crée un <a href="http://www.wikiwand.com/fr/Lien_symbolique">lien symbolique</a> avec <code class="code-inline">ln -s</code> dans un dossier Dropbox partagé.</p>
<p>C’est un peu du bricolage mais ça marche. Seule précaution à prendre : fermer l’application Dropbox avant de créer le lien, la relancer ensuite.</p>
<hr>
<p>Pour renseigner la date du post, miyano se base sur la date de création du fichier <i>.bearnote</i>. À chaque changement d’une note et donc à chaque nouvel export d’un fichier, la date se met à jour.</p>
<p>On peut la modifier avec la commande <code class="code-inline">touch</code> :</p>
<p><code class="code-inline">$ touch -t YYYYMMDDHHmm.SS nom_du_fichier</code></p>
<hr>
<p>Pour que les liens d’un post s’ouvrent dans un nouvel onglet, il faut utiliser l’argument <code class="code-inline">_blank</code> dans le lien html.</p>
<p>Étant donné le fonctionnement de miyano, il a fallu utiliser un script JS pour convertir les liens « à la volée ».</p>
<pre><code class="code-multiline highlight">    var links = document.links;
    for (var i = 0, linksLength = links.length; i &lt; linksLength; i++) {
      if (!links[i].target) {
        if (links[i].hostname !== window.location.hostname || /\.(?!html?)([a-z]{0,3}|[a-zt]{0,4})$/.test(links[i].pathname)) {
          links[i].target = '_blank';
        }
      }
    }
  &lt;/script&gt; 
</code></pre>
<p>merci à <a href="https://blog.lesieur.name/ne-vous-souciez-plus-de-la-target-dans-vos-liens/">Bruno Lesieur</a></p>
<hr>
<p>Il reste quelques domaines à creuser :</p>
<ul><li>le « look » du site : basé sur du CSS, ça dépasse un peu mes compétences.</li></ul>
<ul><li>réussir à modifier certains comportements de <a href="https://github.com/wuusn/miyano">miyano</a>, notamment l’affichage de la date.</li></ul>
<br>
<p><a href="../tag/technique/" class="hashtag">#technique</a></p>

      </article>
    </main>
    <!-- <footer id="footer"> <div class="icons"> <script type="text/javascript"> var name = "francois"; var domain = "melodia.fr"; document.write('<a href="mailto:' + name + '@' + domain + '" class="far fa-envelope"><span class="label">
    Mail</span></a>'); </script> </div> <div class="copyright"> <li>&copy; Mélodia</li> <li>Design: <a href="http://html5up.net">HTML5 UP</a> </li> </div> </footer> -->
  </body>
  <!-- Script permetant d'ajouter à la volée un argument "_blank" aux liens externes pour qu'ils s'ouvrent dans un nouvel onglet -->
  <script type="text/javascript">
    var links = document.links;
    for (var i = 0, linksLength = links.length; i < linksLength; i++) {
      if (!links[i].target) {
        if (links[i].hostname !== window.location.hostname || /\.(?!html?)([a-z]{0,3}|[a-zt]{0,4})$/.test(links[i].pathname)) {
          links[i].target = '_blank';
        }
      }
    }
  </script>
  <html>
